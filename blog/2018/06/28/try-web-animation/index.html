<!doctype html><html lang="zh-CN"><head><meta charset="utf-8">

<!-- Prefetch -->
<link rel="preconnect" href="https://fonts.googleapis.com/" crossorigin>
<link rel="dns-prefetch" href="https://fonts.googleapis.com/">
<link rel="dns-prefetch" href="https://cdn.jsdelivr.net/">

<!-- Meta -->
<title>&#x7F51;&#x9875;&#x7AEF;&#x7684;&#x97F3;&#x4E50;&#x53EF;&#x89C6;&#x5316; | Memory-copy</title>

<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<!-- Google fonts -->
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lobster&amp;display=swap&amp;text=Memory-copy0123456789">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inconsolata&amp;display=swap">
<link rel="shortcut icon" href="/assets/favicon.ico"><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon-32x32.png"><link rel="icon" type="image/png" sizes="48x48" href="/assets/favicon-48x48.png"><link rel="manifest" href="/assets/manifest.json"><meta name="mobile-web-app-capable" content="yes"><meta name="theme-color" content="#7f9cf5"><meta name="application-name" content="Memory-copy"><link rel="apple-touch-icon" sizes="57x57" href="/assets/apple-touch-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/apple-touch-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/apple-touch-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/apple-touch-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/apple-touch-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/apple-touch-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/apple-touch-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/apple-touch-icon-152x152.png"><link rel="apple-touch-icon" sizes="167x167" href="/assets/apple-touch-icon-167x167.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon-180x180.png"><link rel="apple-touch-icon" sizes="1024x1024" href="/assets/apple-touch-icon-1024x1024.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="apple-mobile-web-app-title" content="Memory-copy"><meta name="msapplication-TileColor" content="#1a202c"><meta name="msapplication-TileImage" content="/assets/mstile-144x144.png"><meta name="msapplication-config" content="/assets/browserconfig.xml"><script defer="defer" src="/build/runtime.4f81b965ee044866d74b.js"></script><script defer="defer" src="/build/app.c495528d022cb4af101d.js"></script><link href="/build/app.c495528d022cb4af101d.css" rel="stylesheet"><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="Memory-copy" type="application/atom+xml">
</head><body class="bg-background text-content antialiased scrollbar-dark"><div class="container max-w-3xl mx-auto px-4 flex flex-col min-h-screen"><div class="flex-grow">
<header>
  <nav class="flex py-4 justify-end items-center">
    <a class="ml-5 text-content text-opacity-75 hover:text-accent" href="/about/">About</a><a class="ml-5 text-content text-opacity-75 hover:text-accent" href="/archives/">Archives</a>
    <div class="w-2"></div>
    
      <a class="header-icon-btn rss" title="RSS" href="/atom.xml"></a>
    
      <a class="header-icon-btn github" title="GitHub" target="_blank" rel="noopener" href="https://github.com/andytimes"></a>
    
  </nav>
  <h1 class="flex-shrink-0 font-logo text-white text-5xl leading-none text-right pb-12">
    <a href="/">Memory-copy</a>
  </h1>
</header>
 <main>
  

<article id="post-try-web-animation" class="article-container" itemscope itemtype="https://schema.org/Article">
  <header class="article-header">
    <div class="text-accent leading-none pb-2 text-sm">Jun 28, 2018</div>
    <h1 class="text-2xl lg:text-3xl font-light leading-tight pt-2" itemprop="headline">
      <a class="block hover:text-accent" href="/blog/2018/06/28/try-web-animation/">&#x7F51;&#x9875;&#x7AEF;&#x7684;&#x97F3;&#x4E50;&#x53EF;&#x89C6;&#x5316;</a>
    </h1>
  </header>
  <div class="article-body" itemprop="articleBody">
    <ul>
<li>&#x66F4;&#x65B0;&#x4E8E; 2019-08-11</li>
</ul>
<p>&#x53BB;&#x5E74; (2018)&#xFF0C;&#x56E0;&#x4E3A;&#x5BF9; JavaScript &#x6BD4;&#x8F83;&#x611F;&#x5174;&#x8DA3;&#xFF0C;&#x52A0;&#x4E0A;&#x5B66;&#x6821;&#x5728;&#x6559;&#x524D;&#x7AEF;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x6240;&#x4EE5;&#x505A;&#x4E86;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x97F3;&#x4E50;&#x53EF;&#x89C6;&#x5316;&#x7F51;&#x9875;&#x3002;&#x7136;&#x800C;&#x56E0;&#x4E3A;&#x6CA1;&#x6709;&#x7CFB;&#x7EDF;&#x7684;&#x5B66;&#x8FC7; JS&#xFF0C;&#x6240;&#x4EE5;&#x7F16;&#x7801;&#x65F6;&#x5019;&#x9047;&#x5230;&#x4E86;&#x5185;&#x5B58;&#x6CC4;&#x9732;&#x8FD8;&#x6709;&#x4E00;&#x4E9B;&#x5947;&#x602A;&#x7684;&#x95EE;&#x9898;&#x6CA1;&#x6709;&#x89E3;&#x51B3;&#xFF0C;&#x76F4;&#x5230;&#x4ECA;&#x5929;&#x624D;&#x628A;&#x6587;&#x7AE0;&#x7ED9;&#x8865;&#x5B8C;&#x3002;</p>
<span id="more"></span>
<p>&#x5F88;&#x591A;&#x5E74;&#x4EE5;&#x524D;&#xFF0C;&#x8FD8;&#x5728;&#x7528;&#x7740;&#x8BFA;&#x57FA;&#x4E9A;&#x585E;&#x73ED;&#x624B;&#x673A;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6211;&#x975E;&#x5E38;&#x559C;&#x6B22;&#x4E00;&#x6B3E;&#x64AD;&#x653E;&#x5668;&#xFF0C;&#x540D;&#x5B57;&#x53EB; <a target="_blank" rel="noopener" href="http://www.lonelycatgames.com/?app=lcgjukebox">LCG Jukebox</a> &#xFF0C;&#x754C;&#x9762;&#x5927;&#x6982;&#x957F;&#x8FD9;&#x6837;</p>
<img src="/blog/2018/06/28/try-web-animation/jukebox.jpg" class title="LCG Jukebox">
<p>&#x53F3;&#x4E0A;&#x89D2;&#x4F1A;&#x6709;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;&#x6CE2;&#x5F62;&#x5206;&#x6790;&#x5668;&#xFF0C;&#x6CE2;&#x5F62;&#x4F1A;&#x6839;&#x636E;&#x97F3;&#x4E50;&#x7684;&#x5185;&#x5BB9;&#x800C;&#x53D8;&#x5316;&#x3002;&#x6240;&#x4EE5;&#x60F3;&#x5728;&#x7F51;&#x9875;&#x64AD;&#x653E;&#x97F3;&#x4E50;&#x65F6;&#x4E5F;&#x80FD;&#x5C55;&#x793A;&#x51FA;&#x7C7B;&#x4F3C;&#x7684;&#x6548;&#x679C;&#x3002;&#x67E5;&#x9605;&#x4E00;&#x4E9B;&#x8D44;&#x6599;&#x4E4B;&#x540E;&#xFF0C;&#x53D1;&#x73B0;&#x4E86;&#x4E00;&#x4E2A;&#x540D;&#x4E3A; p5.js &#x7684; JavaScript&#x5E93;&#xFF0C;&#x4F7F;&#x7528; p5.js &#x53EF;&#x4EE5;&#x65B9;&#x4FBF;&#x5730;&#x5904;&#x7406;&#x89C6;&#x97F3;&#x9891;&#x548C;&#x7ED8;&#x56FE;&#xFF0C;&#x5176;&#x4E2D; p5 &#x7684;&#x97F3;&#x9891;&#x5E93;&#x80FD;&#x5F88;&#x597D;&#x5730;&#x5B9E;&#x73B0;&#x6CE2;&#x5F62;&#x6548;&#x679C;&#xFF0C;p5.js &#x7684;&#x5B98;&#x7F51;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;&#x5F88;&#x597D;&#x7684;&#x8303;&#x4F8B; <a target="_blank" rel="noopener" href="https://p5js.org/zh-Hans/examples/sound-oscillator-frequency.html">Oscillator Frequency</a> &#x8981;&#x5B9E;&#x73B0;&#x97F3;&#x4E50;&#x6587;&#x4EF6;&#x4F5C;&#x4E3A;&#x97F3;&#x9891;&#x8F93;&#x5165;&#xFF0C;&#x901A;&#x8FC7; <code>loadSound()</code></p>
<pre><code class="language-js">let music

function preload() {
	music = loadSound(&quot;path_to_music_file&quot;)
}

function setup() {
	music.play()
}
</code></pre>
<p>&#x6709;&#x4E86;&#x97F3;&#x9891;&#x6E90;&#x4E4B;&#x540E;&#xFF0C;&#x4F7F;&#x7528; <a target="_blank" rel="noopener" href="https://p5js.org/reference/#/p5.FFT" title="&#x5FEB;&#x901F;&#x5085;&#x91CC;&#x53F6;&#x53D8;&#x6362;">p5.FFT</a> &#x63D0;&#x4F9B;&#x7684; <a target="_blank" rel="noopener" href="https://p5js.org/reference/#/p5.FFT/waveform">waveform()</a> &#x65B9;&#x6CD5;&#x5206;&#x6790;&#x51FA;&#x6CE2;&#x5F62;&#x6570;&#x636E;&#xFF0C;&#x7136;&#x540E;&#x5728;&#x5C4F;&#x5E55;&#x4E0A;&#x753B;&#x51FA;&#x6CE2;&#x5F62;&#x52A8;&#x753B;&#xFF1A;</p>
<pre><code class="language-js">let fft

function setup() {
	let cnv = createCanvas(150, 50)
	noFill()
	cnv.parent(&apos;vz&apos;)
	fft = new p5.FFT()
	frameRate(30)
}

function draw() {
	let waveform = fft.waveform()
	// white line
	stroke(255, 255, 255)
	strokeWeight(2)
	beginShape()
	for (let i = 0; i &lt; waveform.length; i++) {
		let x = map(i, 0, waveform.length, 0, width)
		let y = map(waveform[i], -1, 1, 0, height)
		vertex(x, y)
	}
	endShape()
}
</code></pre>
<p>&#x5230;&#x8FD9;&#x91CC;&#x57FA;&#x672C;&#x5C31;&#x5B8C;&#x6210;&#x4E86;&#x3002;&#x7531;&#x4E8E;&#x7F51;&#x9875;&#x4E0A;&#x6709;&#x591A;&#x4E2A;&#x97F3;&#x4E50;&#x6587;&#x4EF6;&#xFF0C;&#x52A0;&#x4E0A;&#x6CA1;&#x6709;&#x6682;&#x505C;&#x97F3;&#x4E50;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x4E8E;&#x662F;&#x4F18;&#x5316;&#x4E00;&#x4E0B;&#xFF0C;&#x5728;&#x70B9;&#x51FB;&#x6CE2;&#x5F62;&#x52A8;&#x753B;&#x533A;&#x57DF;&#x6765;&#x5B9E;&#x73B0;&#x64AD;&#x653E;/&#x6682;&#x505C;&#xFF0C;&#x8FD9;&#x91CC;&#x9700;&#x8981;&#x5F15;&#x5165; <a target="_blank" rel="noopener" href="https://p5js.org/reference/#/libraries/p5.dom">p5.dom</a> &#x8FD9;&#x4E2A;&#x5E93;&#xFF1A;</p>
<pre><code class="language-js">function setup() {
	let cnv = createCanvas(150, 50)
	// ...
	cnv.mouseClicked(togglePlay)
	// ...
}

function togglePlay() {
	if (song.isPlaying()) {
		song.pause()
	} else {
		song.play()
	}
}
</code></pre>
<p>&#x5728;&#x97F3;&#x4E50;&#x6B63;&#x5728;&#x64AD;&#x653E;&#x65F6;&#xFF0C;&#x5207;&#x6362;&#x5230;&#x4E0B;&#x4E00;&#x9996;&#xFF0C;&#x6709;&#x65F6;&#x5373;&#x4F7F;&#x5229;&#x7528; <code>song.stop()</code> &#x4E5F;&#x4F1A;&#x51FA;&#x73B0;&#x540C;&#x65F6;&#x64AD;&#x653E;&#x4E24;&#x9996;&#x97F3;&#x4E50;&#x7684;&#x95EE;&#x9898;&#x3002;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x56F0;&#x6270;&#x4E86;&#x6211;&#x5F88;&#x4E45;&#xFF0C;&#x540E;&#x6765;&#x4ED4;&#x7EC6;&#x9605;&#x8BFB;&#x6587;&#x6863;&#xFF0C;&#x53D1;&#x73B0;&#x662F;&#x97F3;&#x9891;&#x9ED8;&#x8BA4;&#x7684; <code>sustain</code> &#x64AD;&#x653E;&#x6A21;&#x5F0F;&#x9020;&#x6210;&#x7684;&#xFF0C;&#x4FEE;&#x6539;&#x4E3A; <code>restart</code> &#x6A21;&#x5F0F;&#x5373;&#x53EF;&#x89E3;&#x51B3;&#xFF1A;</p>
<pre><code class="language-js">const music = [loadSound(&quot;music_file1&quot;), loadSound(&quot;music_file2&quot;),
               loadSound(&quot;music_file3&quot;)]

function play_music(id) {
	let next = music[id]

	if (song != next) {
		song.stop()
		song = next
	}

	song.playMode(&apos;restart&apos;)
	song.play()
}
</code></pre>
<p>&#x4E3A;&#x7F51;&#x9875;&#x6240;&#x5199;&#x7684;&#x4EE3;&#x7801;&#x5728;&#x8FD9;&#x91CC; <a target="_blank" rel="noopener" href="https://github.com/andytimes/web2018/blob/master/js/sketch.js">andytimes / web2018</a> &#xFF0C;&#x7136;&#x540E;&#x8BBF;&#x95EE; <a target="_blank" rel="noopener" href="https://2018.andytimes.xyz">2018.andytimes.xyz</a> &#x80FD;&#x770B;&#x5230;&#x6700;&#x7EC8;&#x6548;&#x679C;&#xFF0C;&#x7F51;&#x9875;&#x53EA;&#x662F;&#x6B4C;&#x624B; Alan Walker <a target="_blank" rel="noopener" href="http://alanwalker.no/">&#x5B98;&#x7F51;</a> &#x7684;&#x4EFF;&#x5236;&#x7248;&#xFF0C;&#x5176;&#x4E2D;&#x8FD8;&#x64C5;&#x81EA;&#x4F7F;&#x7528;&#x4E86;&#x4E00;&#x4E9B;&#x56FE;&#x7247;&#x548C;&#x97F3;&#x9891;&#x7D20;&#x6750;&#xFF1A;</p>
<img src="/blog/2018/06/28/try-web-animation/visualizer.png" class>
<p>&#x5728;&#x5229;&#x7528; p5.js  &#x7ED8;&#x56FE;&#x7684;&#x9875;&#x9762;&#xFF0C;&#x5185;&#x5B58;&#x5360;&#x7528;&#x633A;&#x9AD8;&#x7684;&#xFF0C;&#x800C;&#x4E14;&#x4F3C;&#x4E4E;&#x8FD8;&#x5B58;&#x5728;&#x7740;&#x5185;&#x5B58;&#x6CC4;&#x9732;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x6211;&#x4E5F;&#x627E;&#x8FC7;&#x522B;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF0C;&#x6BD4;&#x5982;&#x8FD9;&#x79CD;&#x66F4;&#x539F;&#x751F;&#x4E00;&#x4E9B;&#x7684;&#x65B9;&#x6CD5;: <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/Web_Audio_API/Visualizations_with_Web_Audio_API">&#x57FA;&#x4E8E;Web Audio API&#x5B9E;&#x73B0;&#x97F3;&#x9891;&#x53EF;&#x89C6;&#x5316;&#x6548;&#x679C;</a> &#xFF0C;&#x7136;&#x800C;&#x5185;&#x5B58;&#x6CC4;&#x9732;&#x7684;&#x95EE;&#x9898;&#x66F4;&#x52A0;&#x4E25;&#x91CD;&#xFF0C;&#x4E5F;&#x8BB8;&#x662F;&#x6211;&#x7684;&#x6C34;&#x5E73;&#x4E0D;&#x591F;&#x5427; hhh&#xFF0C;&#x5E0C;&#x671B;&#x4EE5;&#x540E;&#x8FD8;&#x6709;&#x673A;&#x4F1A;&#x7EE7;&#x7EED;&#x4E86;&#x89E3;&#x66F4;&#x591A; Web&#x7AEF;&#x7684;&#x77E5;&#x8BC6;&#x3002;</p>

  </div>
  
  <footer class="article-footer">
    
      <ul class="list-none flex flex-wrap justify-end">
        <li class="pl-2">
            <a class="text-sm text-accent hover:underline" href="/tags/Javascript/">#Javascript</a>
          </li>
      </ul>
      <meta itemprop="keywords" content>
    
  </footer>
  <meta itemprop="datePublished" content="2018-06-28T09:41:56.000Z">
  <meta itemprop="dateModified" content="2019-08-11T15:03:01.000Z">
  <div itemprop="author publisher" itemscope itemtype="https://schema.org/Person">
    <meta itemprop="name" content="Andy Deng">
  </div>
</article>

</main>


</div><div class="flex-shrink-0"><footer class="py-12 text-center">
  &#xA9; 2022 Andy Deng<br>
  Powered by <a class="hover:text-accent hover:underline" href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>
</footer>
</div></div></body></html>